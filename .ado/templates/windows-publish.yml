steps:
  - task: CopyFiles@2
    displayName: Stage headers
    condition: and(eq(variables.BuildConfiguration, 'Debug'), eq(variables.BuildPlatform, 'x86'))
    inputs:
      sourceFolder: $(Build.SourcesDirectory)/include
      targetFolder: $(Build.ArtifactStagingDirectory)/include
      contents: '**'

  - task: CopyFiles@2
    displayName: Stage library
    inputs:
      sourceFolder: $(Build.BinariesDirectory)/$(BuildConfiguration)/$(BuildPlatform)/src/Continuity
      targetFolder: $(Build.ArtifactStagingDirectory)/$(BuildConfiguration)/$(BuildPlatform)
      contents: |
        Continuity.dll
        Continuity.lib
        Continuity.pdb

  - task: PublishPipelineArtifact@1
    displayName: Publish artifacts
    inputs:
      path: $(Build.ArtifactStagingDirectory)
      artifactName: Windows-$(BuildConfiguration)-$(BuildPlatform)
